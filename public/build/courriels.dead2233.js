(self.webpackChunk=self.webpackChunk||[]).push([[121],{8898:(e,t,r)=>{"use strict";r(6992),r(1539),r(3948),r(8309),r(4916),r(5306),r(3123),r(7042),r(9600),r(4603),r(9714),r(8674),r(2564),r(1038),r(8783),r(2526),r(1817),r(2165),r(9753);function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new(r(538).Z)({el:"form",delimiters:["${","}$"],data:{_token:"",formConstraints:null,disabled:!0,errormessages:{courrielsName:"",courrielsMail_from:"",courrielsSubject:"",courrielsMessage:"",courrielsNosiar:""},messageapi:"",classCommentSent:""},mounted:function(){var e=this.$el,t=new FormData(e);this._token=t.get("courriels[_token]");var r,s=[],a=n(t.keys());try{for(a.s();!(r=a.n()).done;){var i=r.value,o=document.querySelector('[name="'+i+'"]');null!=o.dataset.constraints&&(s[i]=JSON.parse(o.dataset.constraints))}}catch(e){a.e(e)}finally{a.f()}this.formConstraints=s},methods:{onCheckFields:function(){var e=this.$el,t=new FormData(e);for(var r in this.formConstraints){this.errormessages[this.normalizeFieldName(r)]="";var s,a=n(this.formConstraints[r]);try{for(a.s();!(s=a.n()).done;){var i=s.value;this.errormessages[this.normalizeFieldName(r)]+=this[i.name+"Check"](i.constraintWidget,t.get(r))}}catch(e){a.e(e)}finally{a.f()}}this.disabled=this.toggleButton()},normalizeFieldName:function(e){return(e=(e=e.replace("]","")).split("["))[1]=e[1].charAt(0).toUpperCase()+e[1].slice(1),e=e.join("")},notBlankCheck:function(e,t){return""==t?e.message+"; ":""},lengthCheck:function(e,t){return t.length<e.min?e.minMessage.replace("{{ limit }}",e.min)+"; ":t.length>e.max?e.minMessage.replace("{{ limit }}",e.max)+"; ":""},emailCheck:function(e,t){return/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/.test(t)?"":e.message+"; "},regexCheck:function(e,t){return new RegExp(e.pattern.slice(1,-1)).test(t)?"":e.message+"; "},blankCheck:function(e,t){return""!=t?e.message+"; ":""},toggleButton:function(){for(var e in this.errormessages)if(""!=this.errormessages[e])return!0;return!1},onSendComment:function(e){e.preventDefault(),this.onAjaxCall()},onAjaxCall:function(){var e,t=this,r=this.$el,s={},a=n(new FormData(r).entries());try{for(a.s();!(e=a.n()).done;){var i=e.value;s[i[0].replace("courriels[","").replace("]","")]=i[1]}}catch(e){a.e(e)}finally{a.f()}fetch("/api/courriels/",{method:"POST",mode:"same-origin",headers:{Authorization:this._token,"Content-type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(s)}).then((function(e){201==e.status?(r.reset(),t.messageapi="Message enregistré",t.classCommentSent="success"):(t.messageapi="Un problème est surnenu. Le message n'a pas été enregistré.",t.classCommentSent="form-error-message"),t.disabled=!0,setTimeout(t.resetApiMessage,2e3)}))},resetApiMessage:function(){this.messageapi="",this.classCommentSent=""}}})}},e=>{"use strict";e.O(0,[817,452,761,674,298],(()=>{return t=8898,e(e.s=t);var t}));e.O()}]);