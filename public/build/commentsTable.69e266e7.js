"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[546],{7301:(e,t,n)=>{n(7327),n(1539),n(8674),n(7042),n(8309),n(1038),n(8783),n(2526),n(1817),n(2165),n(6992),n(3948),n(9753);var r=n(538),s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"alert",class:{"alert-success":e.success,"alert-warning":e.fail},attrs:{role:"alert"}},[e._v(e._s(e.message))])};s._withStripped=!0;const o={name:"message-api",delimiters:["${","}$"],props:{message:String,success:Boolean,fail:Boolean}};var i=(0,n(1900).Z)(o,s,[],!1,null,null,null);i.options.__file="assets/components/admin/comments/MessageApi.vue";const a=i.exports;function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}new r.Z({el:"#commentsTable",delimiters:["${","}$"],components:{MessageApi:a},data:{commentsToDelete:[],messageApi:"",successApi:!1,failApi:!1},methods:{onStoreCommentsToDelete:function(e){var t=e.target,n={id:t.dataset.commentid,token:t.dataset._token};t.checked?this.commentsToDelete.push(n):this.commentsToDelete=this.commentsToDelete.filter((function(e){return e.id!=n.id&&e.token!=n.token}))},deleteComments:function(){var e,t=this,n=0,r=c(this.commentsToDelete);try{var s=function(){var r=e.value;fetch("/admin/api/comments/"+r.id,{method:"DELETE",mode:"same-origin",headers:{Authorization:r.token,"X-Requested-With":"XMLHttpRequest"}}).then((function(e){200==e.status?($("#comment_"+r.id).parents("tr").remove(),t.messageApi="Elément(s) supprimés",t.successApi=!0,t.failApi=!1):(t.messageApi="Une erreur est survenue: "+e.status+" "+e.statusText,t.successApi=!1,t.failApi=!0),++n==t.commentsToDelete.length&&t.tryToRefresh()})).catch((function(e){t.messageApi="Une erreur est survenue: "+e.message,t.successApi=!1,t.failApi=!0}))};for(r.s();!(e=r.n()).done;)s()}catch(e){r.e(e)}finally{r.f()}},tryToRefresh:function(){this.commentsToDelete=[];try{window.location.reload()}catch(e){console.log(e)}}}})},7327:(e,t,n)=>{var r=n(2109),s=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},1900:(e,t,n)=>{function r(e,t,n,r,s,o,i,a){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):s&&(c=a?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:e,options:l}}n.d(t,{Z:()=>r})}},e=>{e.O(0,[1,311,761,674],(()=>{return t=7301,e(e.s=t);var t}));e.O()}]);